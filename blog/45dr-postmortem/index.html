<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 4.24.2"/><meta data-react-helmet="true" name="description" content="I worked on a Roguelike game from 8 March 2022 to 22 April 2022. My motivations were to teach myself new things, develop my existing skills…"/><meta data-react-helmet="true" property="og:title" content="45 Day Roguelike Postmortem"/><meta data-react-helmet="true" property="og:description" content="I worked on a Roguelike game from 8 March 2022 to 22 April 2022. My motivations were to teach myself new things, develop my existing skills…"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:creator" content="Kitsune"/><meta data-react-helmet="true" name="twitter:title" content="45 Day Roguelike Postmortem"/><meta data-react-helmet="true" name="twitter:description" content="I worked on a Roguelike game from 8 March 2022 to 22 April 2022. My motivations were to teach myself new things, develop my existing skills…"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><style data-href="/styles.e7a13cbcedd535ab3165.css" data-identity="gatsby-global-css">:root{--reach-skip-nav:1}[data-reach-skip-nav-link]{clip:rect(0 0 0 0);border:0;height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}[data-reach-skip-nav-link]:focus{clip:auto;background:#fff;height:auto;left:10px;padding:1rem;position:fixed;top:10px;width:auto;z-index:1}</style><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><title data-react-helmet="true">45 Day Roguelike Postmortem | Kitsune Cafe</title><link data-react-helmet="true" rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inconsolata&amp;display=swap"/></head><body><script>(function() { try {
  var mode = localStorage.getItem('theme-ui-color-mode');
  if (!mode) return
  document.documentElement.classList.add('theme-ui-' + mode);
  document.body.classList.add('theme-ui-' + mode);
} catch (e) {} })();</script><div id="___gatsby"><style data-emotion="css-global prmyx4">body{--theme-ui-colors-text:#839496;--theme-ui-colors-background:#002b36;--theme-ui-colors-primary:#cb4b16;--theme-ui-colors-secondary:#b58900;--theme-ui-colors-highlight:#93a1a1;--theme-ui-colors-purple:hsl(290, 100%, 80%);--theme-ui-colors-muted:#073642;--theme-ui-colors-gray:hsl(210, 50%, 60%);--theme-ui-colors-heading:#dc322f;--theme-ui-colors-link:#b58900;--theme-ui-colors-accent:#073642;color:var(--theme-ui-colors-text);background-color:var(--theme-ui-colors-background);}body.theme-ui-dark{--theme-ui-colors-background:#002b36;--theme-ui-colors-accent:#073642;--theme-ui-colors-highlight:#93a1a1;--theme-ui-colors-muted:#073642;}body.theme-ui-light{--theme-ui-colors-background:#fdf6e3;--theme-ui-colors-accent:#eee8d5;--theme-ui-colors-highlight:#586e75;--theme-ui-colors-muted:#93a1a1;}</style><style data-emotion="css-global 19x4q5a">*{box-sizing:border-box;}body{margin:0;font-family:"Inconsolata",system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",sans-serif;line-height:1.5;font-weight:400;overflow-y:scroll;overflow-x:hidden;}</style><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><header><style data-emotion="css efdc4g">.css-efdc4g{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;background-color:var(--theme-ui-colors-accent);text-transform:uppercase;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:50px;width:100%;border-bottom:1px;}</style><nav class="css-efdc4g"><style data-emotion="css q327xw">.css-q327xw{width:95%;max-width:856px;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;}@media screen and (min-width: 40em){.css-q327xw{width:95%;}}@media screen and (min-width: 52em){.css-q327xw{width:95%;}}@media screen and (min-width: 64em){.css-q327xw{width:100%;}}</style><style data-emotion="css 1f3p3so">.css-1f3p3so{box-sizing:border-box;margin:0;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:95%;max-width:856px;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;}@media screen and (min-width: 40em){.css-1f3p3so{width:95%;}}@media screen and (min-width: 52em){.css-1f3p3so{width:95%;}}@media screen and (min-width: 64em){.css-1f3p3so{width:100%;}}</style><div class="css-1f3p3so"><style data-emotion="css 1teal8m">.css-1teal8m{-webkit-text-decoration:none;text-decoration:none;}</style><style data-emotion="css 11tng67">.css-11tng67{box-sizing:border-box;margin:0;min-width:0;color:var(--theme-ui-colors-primary);-webkit-text-decoration:none;text-decoration:none;}.css-11tng67:hover{color:var(--theme-ui-colors-secondary);}</style><a class="css-11tng67" href="/">キツネの喫茶店</a><style data-emotion="css 1hzmz91">.css-1hzmz91{-webkit-box-pack:end;-ms-flex-pack:end;-webkit-justify-content:end;justify-content:end;gap:8px;}@media screen and (min-width: 40em){.css-1hzmz91{gap:32px;}}.css-1hzmz91>*{-webkit-text-decoration:none;text-decoration:none;}</style><style data-emotion="css 1dguua8">.css-1dguua8{box-sizing:border-box;margin:0;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-ms-flex-pack:end;-webkit-justify-content:end;justify-content:end;gap:8px;}@media screen and (min-width: 40em){.css-1dguua8{gap:32px;}}.css-1dguua8>*{-webkit-text-decoration:none;text-decoration:none;}</style><div class="css-1dguua8"><style data-emotion="css 1q7xh3m">.css-1q7xh3m{box-sizing:border-box;margin:0;min-width:0;color:var(--theme-ui-colors-primary);}.css-1q7xh3m:hover{color:var(--theme-ui-colors-secondary);}</style><a class="css-1q7xh3m" href="/"><span>01</span> Projects</a><a class="css-1q7xh3m" href="/blog/"><span>02</span> Blog</a><a class="css-1q7xh3m" href="/about/"><span>03</span> About</a></div></div></nav></header><div id="reach-skip-nav" data-reach-skip-nav-content=""></div><div><style data-emotion="css 1oy96gr">.css-1oy96gr{max-width:856px;width:100%;margin-left:auto;margin-right:auto;padding-left:16px;padding-right:16px;padding-top:32px;padding-bottom:32px;}</style><div class="css-1oy96gr"><style data-emotion="css 13xhtad">.css-13xhtad{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><style data-emotion="css oqdo9p">.css-oqdo9p{box-sizing:border-box;margin:0;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><div class="css-oqdo9p"><style data-emotion="css 6wajs7">.css-6wajs7{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}</style><style data-emotion="css smjs78">.css-smjs78{box-sizing:border-box;margin:0;min-width:0;color:var(--theme-ui-colors-gray);margin:0;margin-top:8px;margin-bottom:8px;border:0;border-bottom:1px solid;border:0;border-bottom:1px solid;border-color:var(--theme-ui-colors-muted);-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}</style><hr class="css-smjs78"/><style data-emotion="css 1acjlja">.css-1acjlja{margin-left:8px;margin-right:8px;}</style><a href="https://discord.com/invite/jNFSXm5kXd" class="css-1acjlja"><style data-emotion="css 1qssie3">.css-1qssie3{fill:var(--theme-ui-colors-primary);}</style><svg height="24" width="24" class="css-1qssie3" viewBox="0 0 127.14 96.36"><g id="discord" data-name="discord"><g id="Discord_Logos" data-name="Discord Logos"><g id="Discord_Logo_-_Large_-_White" data-name="Discord Logo - Large - White"><path d="M107.7,8.07A105.15,105.15,0,0,0,81.47,0a72.06,72.06,0,0,0-3.36,6.83A97.68,97.68,0,0,0,49,6.83,72.37,72.37,0,0,0,45.64,0,105.89,105.89,0,0,0,19.39,8.09C2.79,32.65-1.71,56.6.54,80.21h0A105.73,105.73,0,0,0,32.71,96.36,77.7,77.7,0,0,0,39.6,85.25a68.42,68.42,0,0,1-10.85-5.18c.91-.66,1.8-1.34,2.66-2a75.57,75.57,0,0,0,64.32,0c.87.71,1.76,1.39,2.66,2a68.68,68.68,0,0,1-10.87,5.19,77,77,0,0,0,6.89,11.1A105.25,105.25,0,0,0,126.6,80.22h0C129.24,52.84,122.09,29.11,107.7,8.07ZM42.45,65.69C36.18,65.69,31,60,31,53s5-12.74,11.43-12.74S54,46,53.89,53,48.84,65.69,42.45,65.69Zm42.24,0C78.41,65.69,73.25,60,73.25,53s5-12.74,11.44-12.74S96.23,46,96.12,53,91.08,65.69,84.69,65.69Z"></path></g></g></g></svg></a><a href="https://mastodon.gamedev.place/@kitsunecafe" class="css-1acjlja"><svg height="24" width="24" class="css-1qssie3" viewBox="0 0 32 32"><path d="M 15.9375 4.03125 C 12.917 4.0435 9.9179219 4.4269844 8.3574219 5.1464844 C 8.3574219 5.1464844 5 6.6748594 5 11.880859 C 5 18.077859 4.9955 25.860234 10.5625 27.365234 C 12.6945 27.938234 14.527953 28.061562 16.001953 27.976562 C 18.676953 27.825562 20 27.005859 20 27.005859 L 19.910156 25.029297 C 19.910156 25.029297 18.176297 25.640313 16.029297 25.570312 C 13.902297 25.495313 11.6615 25.335688 11.3125 22.679688 C 11.2805 22.432688 11.264625 22.182594 11.265625 21.933594 C 15.772625 23.052594 19.615828 22.420969 20.673828 22.292969 C 23.627828 21.933969 26.199344 20.081672 26.527344 18.388672 C 27.041344 15.720672 26.998047 11.880859 26.998047 11.880859 C 26.998047 6.6748594 23.646484 5.1464844 23.646484 5.1464844 C 22.000984 4.3779844 18.958 4.019 15.9375 4.03125 z M 12.705078 8.0019531 C 13.739953 8.0297031 14.762578 8.4927031 15.392578 9.4707031 L 16.001953 10.505859 L 16.609375 9.4707031 C 17.874375 7.5037031 20.709594 7.6264375 22.058594 9.1484375 C 23.302594 10.596438 23.025391 11.531 23.025391 18 L 23.025391 18.001953 L 20.578125 18.001953 L 20.578125 12.373047 C 20.578125 9.7380469 17.21875 9.6362812 17.21875 12.738281 L 17.21875 16 L 14.787109 16 L 14.787109 12.738281 C 14.787109 9.6362812 11.429688 9.7360938 11.429688 12.371094 L 11.429688 18 L 8.9765625 18 C 8.9765625 11.526 8.7043594 10.585438 9.9433594 9.1484375 C 10.622859 8.3824375 11.670203 7.9742031 12.705078 8.0019531 z"></path></svg></a><a href="https://github.com/kitsunecafe" class="css-1acjlja"><svg height="24" width="24" class="css-1qssie3" role="img" viewBox="0 0 24 24"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a><a href="https://kitsunecafe.itch.io/" class="css-1acjlja"><svg height="24" width="24" class="css-1qssie3" role="img" viewBox="0 0 24 24"><title>Itch.io</title><path d="M3.13 1.338C2.08 1.96.02 4.328 0 4.95v1.03c0 1.303 1.22 2.45 2.325 2.45 1.33 0 2.436-1.102 2.436-2.41 0 1.308 1.07 2.41 2.4 2.41 1.328 0 2.362-1.102 2.362-2.41 0 1.308 1.137 2.41 2.466 2.41h.024c1.33 0 2.466-1.102 2.466-2.41 0 1.308 1.034 2.41 2.363 2.41 1.33 0 2.4-1.102 2.4-2.41 0 1.308 1.106 2.41 2.435 2.41C22.78 8.43 24 7.282 24 5.98V4.95c-.02-.62-2.082-2.99-3.13-3.612-3.253-.114-5.508-.134-8.87-.133-3.362 0-7.945.053-8.87.133zm6.376 6.477a2.74 2.74 0 0 1-.468.602c-.5.49-1.19.795-1.947.795a2.786 2.786 0 0 1-1.95-.795c-.182-.178-.32-.37-.446-.59-.127.222-.303.412-.486.59a2.788 2.788 0 0 1-1.95.795c-.092 0-.187-.025-.264-.052-.107 1.113-.152 2.176-.168 2.95v.005l-.006 1.167c.02 2.334-.23 7.564 1.03 8.85 1.952.454 5.545.662 9.15.663 3.605 0 7.198-.21 9.15-.664 1.26-1.284 1.01-6.514 1.03-8.848l-.006-1.167v-.004c-.016-.775-.06-1.838-.168-2.95-.077.026-.172.052-.263.052a2.788 2.788 0 0 1-1.95-.795c-.184-.178-.36-.368-.486-.59-.127.22-.265.412-.447.59a2.786 2.786 0 0 1-1.95.794c-.76 0-1.446-.303-1.948-.793a2.74 2.74 0 0 1-.468-.602 2.738 2.738 0 0 1-.463.602 2.787 2.787 0 0 1-1.95.794h-.16a2.787 2.787 0 0 1-1.95-.793 2.738 2.738 0 0 1-.464-.602zm-2.004 2.59v.002c.795.002 1.5 0 2.373.953.687-.072 1.406-.108 2.125-.107.72 0 1.438.035 2.125.107.873-.953 1.578-.95 2.372-.953.376 0 1.876 0 2.92 2.934l1.123 4.028c.832 2.995-.266 3.068-1.636 3.07-2.03-.075-3.156-1.55-3.156-3.025-1.124.184-2.436.276-3.748.277-1.312 0-2.624-.093-3.748-.277 0 1.475-1.125 2.95-3.156 3.026-1.37-.004-2.468-.077-1.636-3.072l1.122-4.027c1.045-2.934 2.545-2.934 2.92-2.934zM12 12.714c-.002.002-2.14 1.964-2.523 2.662l1.4-.056v1.22c0 .056.56.033 1.123.007.562.026 1.124.05 1.124-.008v-1.22l1.4.055C14.138 14.677 12 12.713 12 12.713z"></path></svg></a><a href="https://steamcommunity.com/id/samsamsamoyed" class="css-1acjlja"><svg height="24" width="24" class="css-1qssie3" viewBox="0 0 26 26"><path d="M 4.875 0 C 2.183594 0 0 2.183594 0 4.875 L 0 13.34375 L 5.0625 14.8125 C 5.992188 13.664063 7.40625 12.9375 9 12.9375 C 9.050781 12.9375 9.105469 12.9375 9.15625 12.9375 L 11.9375 9.0625 C 11.9375 9.039063 11.9375 9.023438 11.9375 9 C 11.9375 5.65625 14.652344 2.9375 18 2.9375 C 21.347656 2.9375 24.0625 5.65625 24.0625 9 C 24.0625 12.347656 21.347656 15.0625 18 15.0625 C 17.96875 15.0625 17.9375 15.0625 17.90625 15.0625 L 14.0625 17.84375 C 14.066406 17.894531 14.0625 17.949219 14.0625 18 C 14.0625 20.800781 11.800781 23.0625 9 23.0625 C 6.40625 23.0625 4.300781 21.109375 4 18.59375 L 0 17.4375 L 0 21.125 C 0 23.816406 2.183594 26 4.875 26 L 21.125 26 C 23.816406 26 26 23.816406 26 21.125 L 26 4.875 C 26 2.183594 23.816406 0 21.125 0 Z M 18 4.78125 C 15.675781 4.78125 13.78125 6.671875 13.78125 9 C 13.78125 11.328125 15.675781 13.21875 18 13.21875 C 20.324219 13.21875 22.21875 11.328125 22.21875 9 C 22.21875 6.671875 20.324219 4.78125 18 4.78125 Z M 18 6.0625 C 19.617188 6.0625 20.9375 7.382813 20.9375 9 C 20.9375 10.617188 19.617188 11.9375 18 11.9375 C 16.386719 11.9375 15.0625 10.617188 15.0625 9 C 15.0625 7.382813 16.386719 6.0625 18 6.0625 Z M 9 14.5625 C 8.175781 14.5625 7.4375 14.859375 6.84375 15.34375 L 9.375 16.0625 C 9.394531 16.066406 9.417969 16.089844 9.4375 16.09375 L 9.5 16.09375 C 10.351563 16.3125 10.96875 17.085938 10.96875 18 C 10.96875 19.085938 10.085938 19.96875 9 19.96875 C 8.792969 19.96875 8.59375 19.9375 8.40625 19.875 L 5.75 19.125 C 6.214844 20.480469 7.488281 21.4375 9 21.4375 C 10.90625 21.4375 12.4375 19.90625 12.4375 18 C 12.4375 16.09375 10.90625 14.5625 9 14.5625 Z"></path></svg></a><hr class="css-smjs78"/></div><main><article><header><style data-emotion="css 1fg8om0">.css-1fg8om0{font-family:inherit;font-weight:900;line-height:1.25;font-size:32px;letter-spacing:-0.03em;margin-top:16px;}@media screen and (min-width: 40em){.css-1fg8om0{font-size:48px;}}</style><h1 class="css-1fg8om0">45 Day Roguelike Postmortem</h1><style data-emotion="css rsra4b">.css-rsra4b{font-size:14px;margin-top:-16px;margin-bottom:16px;}</style><style data-emotion="css 1k7srsm">.css-1k7srsm{font-size:14px;margin-top:-16px;margin-bottom:16px;}</style><p class="css-1k7srsm">April 22, 2022</p></header><section><p class="css-0 ex695c02">I worked on a Roguelike game from 8 March 2022 to 22 April 2022. My motivations were to teach myself new things, develop my existing skills, and have fun with the development process. Two out of three isn’t bad. <style data-emotion="css 9pxufa">.css-9pxufa{color:var(--theme-ui-colors-primary);}.css-9pxufa:hover{color:var(--theme-ui-colors-secondary);}</style><a href="https://mochancrimthann.itch.io/45dr" class="css-9pxufa ex695c02">Give it a try.</a></p><p class="css-0 ex695c02">Starting a new project is always exciting, so I put in many hours in the first couple of weeks. There’s no shortage of inspiring roguelike games, but most of my inspiration was directly from <a href="https://crawl.develz.org/" class="css-9pxufa ex695c02">DCSS</a>. I completed procedural generation, movement, tile visibility, combat, items, enemy AI, and a character controller within the first week and a half. Most of the development was straightforward to reason. I decided early in development to create a new component for each feature to avoid breaking previous ones. Nothing drains my motivation like a week-long bug-fixing marathon.</p><p class="css-0 ex695c02">My method of generating a dungeon level was disappointingly simple: <a href="https://en.wikipedia.org/wiki/Binary_space_partitioning" class="css-9pxufa ex695c02">binary space partitioning</a>. BSP will determine whether a space can be split in half and then randomly split it vertically or horizontally. Repeat this until the space is sufficiently divided, determine how much of that space to use, then connect it to others with corridors. I separated the logic for generating the space of the dungeon and displaying the dungeon into two separate components: Dungeon Generator and Dungeon Renderer. The renderer is responsible for waiting for the generator to finish and then rendering the tiles onto a Unity tilemap.</p><p class="css-0 ex695c02">The field of view (FOV) system is simple as well. This system uses another tilemap for rendering visibility. Each tile initializes to black with full opacity (<style data-emotion="css 4gll6b">.css-4gll6b{font-family:Menlo,monospace;color:var(--theme-ui-colors-secondary);background-color:var(--theme-ui-colors-muted);}</style><code class="css-4gll6b ex695c02">RGBA(0, 0, 0, 1)</code>). The opacity value will change to 0.5 or 0 depending on visibility.</p><p class="css-0 ex695c02"><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:300px">
      <span class="gatsby-resp-image-background-image" style="padding-bottom:33.33333333333333%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABNklEQVQoz33Rv6qCUBwHcDenWnSqR/AlegSfo8HRpDSlyKEwG4Jq6AWMJok2EXHKWcQxUHBpy0nsG+dcrlxvl3vgx/kD58OX349hGAa/q9vtYjQaYTabYTqdYjKZQFVVWuv1GmVZ4ud6vV7NzhCAZVnwPP8BGoaB+XyOw+GA3W5HcQI+n08K3O93FEXRQikoCAKGw2ELVBSFJjsejwiCAJvNBpqmwbIsVFWFLMtwuVzgui4ej8dnQlEUPxKOx2OsVis4joPT6QRd1+mdrDAMkec5brcbkiShb3Vdf4G9Xg+SJKHT6TQgwfb7PUzTpKk8z8NisaAg+ZimKXzfx/V6pXArYb/fx2AwAMdxLZD0bblc4nw+Y7vd0jfbtpuhRFGEOI4brAH/mrIsy7RnpEg/v8//TZkM5Q0mgWrUHqWPXAAAAABJRU5ErkJggg==&#x27;);background-size:cover;display:block"></span>
  <style data-emotion="css 9whsf3">.css-9whsf3{max-width:100%;}</style><img class="gatsby-resp-image-image css-9whsf3 ex695c02" alt="Tile opacity values" title="Tile opacity values" src="/static/7c4d47936c18eed5a8966d9342a8a338/5a46d/values.png" srcSet="/static/7c4d47936c18eed5a8966d9342a8a338/5a46d/values.png 300w" sizes="(max-width: 300px) 100vw, 300px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
    </span></p><p class="css-0 ex695c02">When the target entity’s FOV updates each turn, the visibility tilemap checks a target’s FOV. I used a C# <code class="css-4gll6b ex695c02">HashSet</code> of coordinates to represent each entity’s FOV. The visibility system monitors a target’s FOV and sets each visible tile’s opacity to 0. Previously visible tiles’ opacities are then set to 0.5. Determining which tiles were previously visible is as simple as taking the difference between the last turn’s visible tiles and this turn’s visible tiles (Previous - Current).</p><p class="css-0 ex695c02"><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:600px">
      <span class="gatsby-resp-image-background-image" style="padding-bottom:75.07246376811594%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAABx0lEQVQ4y62Uya5BQRRFfaqIJtqBiUTEB/gIYmzMhAmGEtGTEIIEEdH33X7ZJ6ly3ecZvZvsKNWs2qdOnbIAwPP5FKn24/HA/X4Xsa3Gvn2KYTFO5uK/JnPscDjgeDxiv9+LrtcrlsslttutnqeBCnY6nVAqlZDJZJDL5TAYDDSYkOl0il6vJ5rNZlgsFtjtdjoKixHWaDQQiUTgcDhgtVphs9ng8XiQSCTEyXg8ljn1el2r3+/jfD6/HCpYt9uVxU6nE36/H4FAQMQ+Kp/Po9lsolarCVSpWq1Kv4JaVDixWAx2u10gXq9XRDDdxuNx2dAMowgjdDQavYCTyURAPp/vTQTyN5vNotPpvIVqFDdqt9tyKwTIP1wcjUblDMPhMILBIEKhkKhYLKLVaokjJozhs49tqlwu67C1QwLV2SlnFENnto0OGSJdUaqPG2qH/3qGxiy73e5fWWafMct0Y84y3b1lWUE5wHN0uVxyB+mYYSeTSaxWKwyHQ3FJSKVSkTaNsHo+VsrtdpObXygUkEqlkE6nxQVLTn2sivl8LtpsNm9vgDg01jJrcr1ei33WqapfLr5cLl8fBu3Q/NqYX49PfWYZX5sfTQYLnZs0qu0AAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image css-9whsf3 ex695c02" alt="Venn diagram of opacity values" title="Venn diagram of opacity values" src="/static/d76be52a5e8673841be6b9fc2c417ead/0a47e/opacity-venn.png" srcSet="/static/d76be52a5e8673841be6b9fc2c417ead/e4d6b/opacity-venn.png 345w,/static/d76be52a5e8673841be6b9fc2c417ead/0a47e/opacity-venn.png 600w" sizes="(max-width: 600px) 100vw, 600px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
    </span></p><p class="css-0 ex695c02">Once the dungeon finishes generating, all “decorators” are notified and begin placing objects through the dungeon. Decorators include the player, enemies, stairs, and treasure chests. These components became a dumping ground for hacky code and workarounds, so I tried to ensure this code didn’t influence any other systems.</p><p class="css-0 ex695c02">Procedural item generation took far and away the most amount of time for a disproportionately small payoff. The base item is simple: it’s just a list of attributes. Any system which interacts with items queries this list. Moving all the behavior out of the items and into relevant systems allows for more contextual behavior. The idea is that items were naive containers of data, not unlike an ECS entity, and different systems would handle items differently. I wish I had adopted more of an ECS approach with how effective the items were.</p><p class="css-0 ex695c02">As an example of the item and attribute system, I’ll use <code class="css-4gll6b ex695c02">DamageAttribute</code>. It extends a base attribute called <code class="css-4gll6b ex695c02">ItemAttribute</code> which has a few overridable properties: <code class="css-4gll6b ex695c02">Label</code>, <code class="css-4gll6b ex695c02">EditorDescription</code>, and <code class="css-4gll6b ex695c02">Description</code>. It also has a string value to accept a <a href="https://en.wikipedia.org/wiki/Dice_notation" class="css-9pxufa ex695c02">dice notation</a> value representing the damage. The string gets parsed into a custom <code class="css-4gll6b ex695c02">Dice</code> object. The combat system queries all relevant items from the attacker and defender (namely, the attacker’s weapon(s) and the defender’s armor(s)). It rolls the attacker’s hit value versus the defender’s armor class (AC) to determine whether the hit connects. If the hit connects, it rolls all damage dice (by querying every item’s <code class="css-4gll6b ex695c02">DamageAttribute</code>). Once the damage is determined, it queries the defender’s highest level <code class="css-4gll6b ex695c02">IDamageHandler</code> and tells it to apply the damage. <code class="css-4gll6b ex695c02">IDamageHandler</code> is an interface that allows multiple sources of defense to handle incoming damage in a layered way (for example, AC -&gt; elemental resistances -&gt; physical resistances -&gt; health).</p><p class="css-0 ex695c02">I may have overengineered it a bit given how small the game is, but working with items and their attributes was very easy and let me develop complex systems around them with very little friction. The biggest time-sink was getting Unity to cooperate with these objects. This approach <em class="css-0 ex695c02">requires</em> custom editor scripts to use their maximum effectiveness. Writing editor scripts for a small game isn’t exactly how I wanted to spend my time. I could have probably used <a href="https://unity.com/dots" class="css-9pxufa ex695c02">Unity’s DOTS</a> framework, but I’ve struggled with that before and didn’t want to try again. I’ve made and used ECS frameworks before, but Unity’s strikes me as needlessly complicated.</p><p class="css-0 ex695c02">The UI was rushed at times and required me to rewrite it a few times. Thankfully it was kept minimal, so most of the rewrites didn’t take much longer than half an hour. I think I’ll pick up a UI framework and use that in the future.</p><p class="css-0 ex695c02">To my surprise, the most common question and feedback I received was about the “(worn)” tag that’s affixed to equipped items. Many people thought it was related to a durability system which makes sense in retrospect — you can’t “wear” a sword. The reason for using “worn” rather than “equipped” was that I’d frequently seen it used in this context, and I wanted to maximize character space for item names. Thanks to everyone who caught this — it is small but valuable feedback.</p><p class="css-0 ex695c02">It’s too early to say if I want to come back and work on this game. I learned a lot from this experience, and I’m glad I did it. I’m thinking of writing articles on exactly how I implemented certain aspects of the game, so let me know if this would be valuable to you.</p></section></article></main><style data-emotion="css 1i8tjli">.css-1i8tjli{margin-top:32px;padding-top:16px;}</style><footer class="css-1i8tjli"><style data-emotion="css 1cech4o">.css-1cech4o{border:0;border-bottom:1px solid;border-color:var(--theme-ui-colors-muted);}</style><hr class="css-1cech4o"/><style data-emotion="css j6r63x">.css-j6r63x{margin-bottom:32px;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><style data-emotion="css 4qwgaq">.css-4qwgaq{box-sizing:border-box;margin:0;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin-bottom:32px;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><div class="css-4qwgaq"><div class="css-1avyp1d"><p>- <!-- -->キツネ</p><p>if this helped you, consider buying me a coffee.</p><style data-emotion="css 1q7xh3m">.css-1q7xh3m{box-sizing:border-box;margin:0;min-width:0;color:var(--theme-ui-colors-primary);}.css-1q7xh3m:hover{color:var(--theme-ui-colors-secondary);}</style><a href="https://ko-fi.com/H2H6270D0" target="_blank" class="css-1q7xh3m"><style data-emotion="css ul14yr">.css-ul14yr{border:0;height:36px;}</style><img height="36" src="https://cdn.ko-fi.com/cdn/kofi2.png?v=3" border="0" alt="Buy Me a Coffee at ko-fi.com" class="css-ul14yr"/></a></div></div><style data-emotion="css 11r1i3o">.css-11r1i3o{-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;list-style:none;padding:0;}</style><style data-emotion="css 1f60bjx">.css-1f60bjx{box-sizing:border-box;margin:0;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;list-style:none;padding:0;}</style><ul class="css-1f60bjx"><li><style data-emotion="css 1rs3k8u">.css-1rs3k8u{color:var(--theme-ui-colors-primary);}.css-1rs3k8u:hover{color:var(--theme-ui-colors-secondary);}</style><a as="[object Object]" to="/blog/convenient-unity-attributes/" rel="prev" class="css-1rs3k8u">← <!-- -->Convenient Unity Attributes</a></li><li><a as="[object Object]" to="/blog/simplifying-code-with-components/" rel="next" class="css-1rs3k8u">Simplifying Code with Components<!-- --> →</a></li></ul></footer></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/45dr-postmortem/";window.___webpackCompilationHash="6449b2d83a8bee968b78";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-888ae54f1a0d020761b8.js"],"app":["/app-41674174b246cff3a58d.js"],"component---node-modules-gatsby-theme-blog-core-src-templates-post-query-js":["/component---node-modules-gatsby-theme-blog-core-src-templates-post-query-js-5b573022e6e9327f6d59.js"],"component---node-modules-gatsby-theme-blog-core-src-templates-posts-query-js":["/component---node-modules-gatsby-theme-blog-core-src-templates-posts-query-js-c1fd4e512f6caab18f4f.js"],"component---src-pages-about-js":["/component---src-pages-about-js-2c0fc266d000c105508d.js"],"component---src-pages-index-js":["/component---src-pages-index-js-697cdd20d366a597286d.js"]};/*]]>*/</script><script src="/polyfill-888ae54f1a0d020761b8.js" nomodule=""></script><script src="/app-41674174b246cff3a58d.js" async=""></script><script src="/framework-9efdcca4902421906150.js" async=""></script><script src="/webpack-runtime-b7b4f70af4fb77c8a71b.js" async=""></script></body></html>